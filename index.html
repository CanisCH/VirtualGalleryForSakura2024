<html>
  <head>
    <!--
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    -->
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
    <title>2024 咲樂生日 線上畫廊</title>
    <script src="js/aframe.min.js"></script>
    <script src="js/bundle.js"></script>
    <script src="js/aframe-environment-component.min.js"></script>
    <script>
    window.addEventListener("wheel", (event) => {
        // small increments for smoother zooming
        const delta = event.wheelDelta / 60 / 10;
        var mycam = document.getElementById("cam").getAttribute("camera");
        var finalZoom =
            document.getElementById("cam").getAttribute("camera").zoom + delta;

        // limiting the zoom
        if (finalZoom < 1) finalZoom = 1;
        if (finalZoom > 2) finalZoom = 2;
        mycam.zoom = finalZoom;
    
        document.getElementById("cam").setAttribute("camera", mycam);
        });
    </script>
    <!--<script src="https://cdn.jsdelivr.net/gh/akbartus/A-Frame-Component-Postprocessing/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/akbartus/A-Frame-Component-Postprocessing/dist/post-processing.min.js"></script>-->
  </head>
<body>
    <!--<a-scene stats> </a-scene> -->
    <a-scene renderer="colorManagement: true">
    <!-- environment="preset: default; skyType: atmosphere; skyColor: #66D; lighting: none; lightPosition: 0 1 1" -->
      <a-assets>
        <a-asset-item id="navmesh" src="mesh/collision.gltf"></a-asset-item>
        <a-asset-item id="room1" src="mesh/entrance.gltf"></a-asset-item>
        <a-asset-item id="room2" src="mesh/hallway.gltf"></a-asset-item>
        <a-asset-item id="room3" src="mesh/round.gltf"></a-asset-item>
        <a-asset-item id="room4" src="mesh/last.gltf"></a-asset-item>
        <a-asset-item id="basic" src="mesh/floor and ceiling.gltf"></a-asset-item>
        <a-asset-item id="tree" src="mesh/tree.gltf"></a-asset-item>
        <!-- <a-asset-item id="credits" src="mesh/credits.gltf"></a-asset-item> -->
        <audio id="Canon" src="music/Pachelbel's_Canon.ogg" preload="auto"></audio>
      </a-assets>

      <!-- Player. -->
      <a-entity id="rig"
                movement-controls="constrainToNavMesh: true;
                                   controls: checkpoint, gamepad, trackpad, keyboard, nipple;"
                position="0 0 0"
                rotation="0 180 0">
        <a-entity id="cam"
                  camera="zoom: 1"
                  position="0 3.9 0"
                  look-controls="pointerLockEnabled: true">
          <!-- <a-cursor></a-cursor> position="0 3.9 0" -->
        </a-entity>
      </a-entity>

      <!-- Nav mesh. -->
      <a-entity nav-mesh
                normal-material
                visible="false"
                position="30 0 -60"
                scale="3 3 3"
                gltf-model="#navmesh"></a-entity>

      <!-- Scene. -->
      <a-entity position="30 0 -60"
                scale="3 3 3"
                gltf-model="#room1">
      </a-entity>
      <a-entity position="30 0 -60"
                scale="3 3 3"
                gltf-model="#room2">
      </a-entity>
      <a-entity position="30 0 -60"
                scale="3 3 3"
                gltf-model="#room3">
      </a-entity>
      <a-entity position="30 0 -60"
                scale="3 3 3"
                gltf-model="#room4">
      </a-entity>
      <a-entity position="30 0 -60"
                scale="3 3 3"
                gltf-model="#basic">
      </a-entity>
      <a-entity position="30 0.05 -60"
                scale="3 3 3"
                gltf-model="#tree">
      </a-entity>
      <!-- <a-entity position="30 0.05 -60"
                scale="3 3 3"
                gltf-model="#credits"> -->
      </a-entity>
      <a-entity position="0 6 0" sound="src: #Canon; autoplay: true; 
                refDistance: 1; rolloffFactor:0.05; loop: true; poolSize:4; volume:0.2">
      <a-entity position="-24 6 -42" sound="src: #Canon; autoplay: true; 
                refDistance: 1; rolloffFactor:0.05; loop: true; poolSize:4; volume:0.2">
      <a-entity position="30 6 -60" sound="src: #Canon; autoplay: true; 
                refDistance: 1; rolloffFactor:0.05; loop: true; poolSize:4; volume:0.2">
      <a-entity position="24 6 -18" sound="src: #Canon; autoplay: true; 
                refDistance: 1; rolloffFactor:0.05; loop: true; poolSize:4; volume:0.2">
      </a-entity>
    </a-scene>
  </body>
</html>
